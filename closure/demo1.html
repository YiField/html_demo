<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<script type="text/javascript">
		/*
			闭包：允许函数访问局部作用域之外的数据，即使外部函数已经退出，外部函数的变量仍可以被内部函数访问
			闭包实现的三个条件：
				内部函数使用了外部函数的变量
				外部函数已经退出
				内部函数可访问
		*/
		function a(){
			var x=0;
			return function(y){
				x=x+y;
				console.log(x)
			}
		}

		var b=a();
		b(1)//1
		b(2)//2

		//函数作为返回值
		function fn(){
			var max=10;
			return function bar(x){
				if(x>max){
					console.log(x);
				}
			}
		}
		var f1=fn();
		f1(15)

		//函数作为参数传递
		(function(f){
			var max=100;
			f(15);
		})(fn)//max取值10,创建了fn作用域的取值


		//上下文栈
		/*
			函数被调用完成后，其执行上下文环境将被销毁，其中的变量也会被同时销毁。
			若函数中的函数引用了函数值，函数的上下文不会被立即销毁
		*/
		function fn1(){
			var max=10;//fn作用域
			return function bar(x){//bar作用域
				if(x>max){
					console.log(x);
				}
			}
		}
	</script>

</body>
</html>